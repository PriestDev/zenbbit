<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../image/fav.png" type="image/x-icon">
  <title>Buy Cryptocurrency</title>
  <link rel="stylesheet" href="darkmode.css">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0f0f10;
      color: #fff;
    }
    body.light-mode .content h2{
  color: #1a1a1a;
}
body.light-mode .content{
  background: #bbb;
}

    /* Content */
    .content {
      max-width: 1000px;
      margin: 20px auto;
      padding: 20px;
      background: #1a1a1c;
      border-radius: 10px;
      
    }
    .content h2 {
      margin: 0 0 8px 0;
    }
    .content p {
      margin: 0 0 16px 0;
      color: #bbb;
    }
    body.light-mode h2{
        color: white;
    }
   

    /* Responsive video */
    .video-container {
      position: relative;
      padding-bottom: 56.25%;
       /* 16:9 aspect ratio */
      height: 0;
      overflow: hidden;
      border-radius: 10px;
    }
    .video-container iframe {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      border: none;
    }

    /* Bottom Nav */
    .bottom-nav {
      position: fixed;
      bottom: 0; left: 0; right: 0;
      background: #111;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      border-top: 1px solid #333;
      z-index: 999;
    }
    .bottom-nav a {
      text-align: center;
      color: #622faa;
      text-decoration: none;
      font-size: 14px;
      flex: 1;
    }
    .bottom-nav i {
      display: block;
      font-size: 20px;
      margin-bottom: 4px;
    }
    .bottom-nav a.active {
      color: #fff;
      font-weight: bold;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .content {
        margin: 10px;
        padding: 15px;
      }
      .header {
        font-size: 16px;
      }
      .bottom-nav i {
        font-size: 18px;
      }
      .bottom-nav a {
        font-size: 12px;
      }
    }

    @media (max-width: 480px) {
      .header {
        font-size: 15px;
        padding: 10px 12px;
      }
      .content {
        padding: 12px;
      }
      .bottom-nav {
        padding: 8px 0;
      }
      .bottom-nav i {
        font-size: 16px;
      }
      .bottom-nav a {
        font-size: 11px;
      }
    }
    .by{
      display: none !important;
    }
  </style>

  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

  <!-- Header -->
    <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="shortcut icon" href="../image/fav.png" type="image/x-icon">
         

  <title>Dashboard</title>
  <link rel="stylesheet" href="darkmode.css">
  <link rel="stylesheet" href="userstyle.css">
  <!-- font-awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- bootstrap-icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
  <!-- izitoast -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js"></script>
  

</head>
<body>

  <!-- Header -->
  <div class="header">
    <a href="profile.php"><i class="bi bi-gear" style="font-size: 1.2rem;cursor: pointer;"></i></a>
        <!-- <i class="bi bi-house-door"></i> -->
        
        <div style="display: flex;  justify-content: center; align-items: center;gap:2rem;">
          
            <!-- Notification -->
            <div class="notification-wrapper">

              <button id="notifBtn" class="icon-btn">
                  <i class="bi bi-bell "></i>
                  <span class="badge" id="notifBadge">3</span>
              </button>

              <div id="notifDropdown" class="dropdown" aria-hidden="true">
                  <h4>Notifications</h4>
                  <div id="notifList"></div>
                 <button id="markReadBtn" class="mark-btn">Mark all as read</button>
              </div>

            </div>

            <!-- Dark/Light mode toggle -->
            <button id="themeToggleBtn" class="toggle-btn icon-btn" aria-label="Toggle theme">
              <i class="fas fa-moon icon-purple"></i>
            </button>
        </div>
  </div>



<style>
  .toast {
  visibility: hidden;
  min-width: 200px;
  background: #00c985;
  color: #fff;
  text-align: center;
  border-radius: 8px;
  padding: 12px;
  position: fixed;
  left: 50%;
  top: 40px;
  transform: translateX(-50%);
  z-index: 1000;
  font-size: 14px;
  opacity: 0;
  transition: opacity 0.4s, bottom 0.4s;
}

.toast.show {
  visibility: visible;
  opacity: 1;
  top: 60px;
}

.mark-btn {
  width: 100%;
  background: #007bff;
  color: #fff;
  border: none;
  padding: 7px;
  cursor: pointer;
  border-radius: 4px;
  margin-top: 8px;
}
.mark-btn:hover { background: #0056b3; }

/* ================= LIGHT MODE ======================= */
body.light-mode .header {
  background: #fff;
  border-bottom: 0.5px solid #ddd;
}
body.light-mode .icon-btn {
  background: #f4f4f4;
  color: #ff8c00; /* orange still pops nicely */
}
body.light-mode .icon-btn:hover {
  background: #eaeaea;
}
body.light-mode .badge {
  background: #0d6efd;
  color: #fff;
}

/* Dropdown */
body.light-mode .dropdown {
  background: #fff;
  border: 1px solid #ddd;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
body.light-mode .dropdown h4 {
  background: #f7f7f7;
  color: #111;
  border-bottom: 1px solid #ddd;
}
body.light-mode .dropdown .notif {
  color: #333;
  border-bottom: 1px solid #eee;
}
body.light-mode .dropdown .notif:hover {
  background: #f2f2f2;
}

/* Mark All Button */
body.light-mode .mark-btn {
  background: #007bff;
  color: #fff;
}
body.light-mode .mark-btn:hover {
  background: #0056b3;
}

  /* --- Responsiveness --- */
@media (max-width: 391px) {
  .dropdown {
    right: auto;
    transform: translateX(-50%);
    
  }

  .icon-btn {
    font-size: 20px;
  }

  .dropdown h4 {
    font-size: 14px;
  }

  .mark-btn {
    font-size: 14px;
    padding: 6px;
  }
}
/* 
@media (max-width: 480px) {
  .dropdown {
    width: 95%;
    top: 50px;
  }

  .icon-btn {
    font-size: 18px;
  }

  .badge {
    font-size: 11px;
    padding: 1px 4px;
  }
} */
</style>




<script>
(() => {
  const POLL_INTERVAL = 5000; // ms - change if needed
  const fetchUrl = 'fetch_notifications.php';
  const markUrl  = 'mark_notifications.php';

  const notifBtn = document.getElementById('notifBtn');
  const notifBadge = document.getElementById('notifBadge');
  const notifDropdown = document.getElementById('notifDropdown');
  const notifList = document.getElementById('notifList');
  const markReadBtn = document.getElementById('markReadBtn');

  let pollTimer = null;

  // Toggle dropdown visibility
  notifBtn.addEventListener('click', () => {
    const isOpen = notifDropdown.style.display === 'block';
    notifDropdown.style.display = isOpen ? 'none' : 'block';
    notifBtn.setAttribute('aria-expanded', String(!isOpen));
  });

  // Close dropdown if clicking outside
  document.addEventListener('click', (e) => {
    if (!document.querySelector('.notification-wrapper').contains(e.target)) {
      notifDropdown.style.display = 'none';
      notifBtn.setAttribute('aria-expanded', 'false');
    }
  });

  // Fetch notifications from server
  async function fetchNotifications() {
    try {
      const res = await fetch(fetchUrl, { credentials: 'same-origin' });
      if (!res.ok) return;
      const data = await res.json();
      // update badge
      notifBadge.textContent = data.count || 0;

      // populate list
      notifList.innerHTML = '';
      if (data.notifications && data.notifications.length) {
        data.notifications.forEach(n => {
          const div = document.createElement('div');
          div.className = 'notif';
          // safe insertion
          const time = n.time ? new Date(n.time).toLocaleString() : '';
          div.textContent = `${n.message} Â· ${time}`;
          notifList.appendChild(div);
        });
      } else {
        notifList.innerHTML = '<div class="notif">No new notifications</div>';
      }
    } catch (err) {
      console.error('fetchNotifications error:', err);
    }
  }

  // Mark all as read
  async function markAllRead() {
    try {
      const res = await fetch(markUrl, {
        method: 'POST',
        credentials: 'same-origin'
      });
      if (!res.ok) throw new Error('Network error');
      const data = await res.json();
      if (data.status === 'ok') {
        notifBadge.textContent = '0';
        notifList.innerHTML = '<div class="notif">No new notifications</div>';
      }
    } catch (err) {
      console.error('markAllRead error:', err);
    }
  }

  markReadBtn.addEventListener('click', (e) => {
    e.preventDefault();
    markAllRead();
  });

  // Start polling
  fetchNotifications();
  pollTimer = setInterval(fetchNotifications, POLL_INTERVAL);
})();
</script>

</div>


   <script>
    // Toggle notification dropdown
    const notifBtn = document.getElementById("notifBtn");
    const notifDropdown = document.getElementById("notifDropdown");

    notifBtn.addEventListener("click", () => {
      notifDropdown.classList.toggle("active");
    });

    // Close dropdown if clicked outside
    document.addEventListener("click", (e) => {
      if (!notifBtn.contains(e.target) && !notifDropdown.contains(e.target)) {
        notifDropdown.classList.remove("active");
      }
    });
  </script>


</body>
</html>

  <!-- Content -->
  <section style="margin-bottom: 8rem;margin-top:6rem;">
    <div class="content">
        <h2>Buy Cryptocurrency</h2>
        <p>Moon Pay</p>
        <div class="video-container">
        <iframe src="https://www.youtube.com/embed/3OyabwnS4Pg?si=bnIv32Wc2sVVCH0U" allowfullscreen></iframe>
        </div>
    </div>
     <div class="content">
        <h2>Buy Cryptocurrency</h2>
        <p>Coin Mama</p>
        <div class="video-container">
        <iframe src="https://www.youtube.com/embed/oto0vXTE8_4?si=0IJo4mzo106lUQrO" allowfullscreen></iframe>
        </div>
    </div>
     <div class="content">
        <h2>Buy Cryptocurrency</h2>
        <p>Binance</p>
        <div class="video-container">
        <iframe src="https://www.youtube.com/embed/jrHryjhhfiY?si=5QCxb-Kb7W_7dR_6" allowfullscreen></iframe>
        </div>
    </div>
      <div class="content">
        <h2>Buy Cryptocurrency</h2>
        <p>Trust Wallet</p>
        <div class="video-container">
        <iframe src="https://www.youtube.com/embed/Rq5R8B_RTEw?si=k5u8YwXKFaSUAJkD" allowfullscreen></iframe>
        </div>
    </div>
  </section>

  <!-- Bottom Nav -->
 
<section class="footer">
    <a href="dashboard.php" style="text-decoration: none; color: #622faa;">
        <div class="swap">
            <div><i class="bi bi-house-door"></i> </div>
            <div><span>Home</span></div>
        </div>
    </a>

    <a href="profile.php" style="text-decoration: none; color: #622faa;" id="profile">
        <div class="swap" >
            <div><i class="bi bi-gear" style="font-size: 1.2rem;cursor: pointer;"></i></div>
            <div><span>Profile</span></div>
        </div>
    </a>

    <a href="connect.php" style="text-decoration: none; color: #622faa;" class="conne">
        <div class="swap" >
            <div><i class="fas fa-link" style="font-size: 1.2rem;cursor: pointer;"></i></div>
            <div><span>Connect</span></div>
        </div>
    </a>

    <a href="buy.php" style="text-decoration: none; color: #622faa;" class="by">
        <div class="swap">
            <div><i class="bi bi-credit-card"></i> </div>
            <div><span>Buy</span></div>
        </div>
    </a>
</section>

<style>
    .swap{
        display: block;
        justify-content: center;
        align-items: center;
        text-decoration: none;
        text-align: center;
    }
     .swap i{
        font-size: 1rem;
     }
      .swap a{
        text-decoration: none;
      }
      .swap span{
        text-decoration: none;
      }
    
    .footer{
        display:flex;
        justify-content: space-around;
        align-items: center;
        bottom: 0;
        left: 0;
        right: 0;
        position: fixed;
        background: black;
        padding: 1rem;
    }
</style>

<script src="//code.jivosite.com/widget/Tyy2Bc4Zz5" async></script>



  <script>
    // Toggle notification dropdown
    const notifBtn = document.getElementById("notifBtn");
    const notifDropdown = document.getElementById("notifDropdown");

    notifBtn.addEventListener("click", () => {
      notifDropdown.classList.toggle("active");
    });

    // Close dropdown if clicked outside
    document.addEventListener("click", (e) => {
      if (!notifBtn.contains(e.target) && !notifDropdown.contains(e.target)) {
        notifDropdown.classList.remove("active");
      }
    });
  </script>

<script>
const body = document.body;
const btn = document.getElementById("themeToggle");

// Load saved theme
const savedTheme = localStorage.getItem("theme");
if (savedTheme === "light") {
  body.classList.add("light");
  updateIcon();
}

// Handle toggle click
btn.addEventListener("click", () => {
  body.classList.toggle("light");
  // Save choice
  if (body.classList.contains("light")) {
    localStorage.setItem("theme", "light");
  } else {
    localStorage.setItem("theme", "dark");
  }
  updateIcon();
});

// Update moon/sun icon
function updateIcon() {
  const icon = btn.querySelector("i");
  if (body.classList.contains("light")) {
    icon.className = "fas fa-sun icon-purple";
  } else {
    icon.className = "fas fa-moon icon-purple";
  }
}
</script>


  <!-- izitoast notifications -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js"></script>
<script>
    // Retrieve the notification data from PHP
    var notification = null;

    // Display the notification using iziToast
    if (notification) {
        iziToast[notification.type]({
            title: notification.title,
            message: notification.message,
            position: 'topRight'
        });
    }
</script>

  <!-- footer.php -->
<!-- Bootstrap JS (optional if you use Bootstrap components) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Font Awesome is included in <head> (see example). Load theme script last -->
<script src="theme.js"></script>


</body>
</html>

</body>
</html>
